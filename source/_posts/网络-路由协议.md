---
title: 路由协议
date: 2020-4-5
tags: 网络
author: 映雪
---

思君如明烛，煎心且衔泪。

<!--more-->

### 路由协议

- 路由协议（英语：Routing protocol）是一种指定数据包转送方式的网上协议。Internet 网络的主要节点设备是路由器，路由器通过路由表来转发接收到的数据。

### 路由协议原理

- 路由协议通过在路由器之间共享路由信息来支持可路由协议。路由信息在相邻路由器之间传递，确保所有路由器知道到其它路由器的路径。总之，路由协议创建了路由表，描述了网络拓扑结构；路由协议与路由器协同工作，执行路由选择和数据包转发功能。

### 路由协议作用

- 路由协议主要运行于路由器上，路由协议是用来确定到达路径的，它包括 RIP，IGRP（Cisco 私有协议），EIGRP（Cisco 私有协议），OSPF，IS-IS，BGP。起到一个地图导航，负责找路的作用。它工作在网络层。
- 路由选择协议**主要是运行在路由器上的协议，主要用来进行路径选择。路径选择就要路由查询自己的路由表，路由表的构成就是网络地址、子网掩码、下一跳地址（网关）。**

### 路由协议分类

1. 直连路由：由设备自动生成指向本地直连网络
2. 静态路由：由网络管理员手工配置的路由条目
3. 动态路由：路由器运行动态路由协议学习到的路由

![截屏2022-06-21 下午6.27.25.png](/images/2022/06/21/2l1v9kYdZbhGBQU.png)

### 路由协议优先级

- 当路由器从不同路径获得到去往同一网段的路由（当这些路由的目的地址与掩码都相同）时，路由器会比较这些路由的优先级，优先选择优先级值最小的路由。
- 路由来源的优先级值越小代表加入路由表的优先级越高。
- 拥有最高优先级的路由将添加进路由表。

1. 华为设备路由优先级

| 路由协议  | 路由协议外部优先级 |     路由协议内部优先级     |
| :-------: | :----------------: | :------------------------: |
|   直连    |         0          |             0              |
|   OSPF    |         10         |             10             |
| OSPF ASE  |        150         |            150             |
| OSPF NSSA |        150         |            150             |
|   IS-IS   |         15         | 15（Level-1）18（Level-2） |
|  Static   |         60         |             60             |
|    RIP    |        100         |            100             |
|   IBGP    |        255         |            200             |
|   EBGP    |        255         |             20             |

- 0 表示直接连接的路由，255 表示任何来自不可信源端的路由
- 路由协议的内部优先级用户不能手动修改

2. 思科设备路由协议优先级

|   路由协议    | 优先级 |
| :-----------: | :----: |
|     直连      |   0    |
|    Static     |   1    |
| EIGRP summary |   5    |
|     EIGRP     |   20   |
|  内部 EIGRP   |   90   |
|  外部 EIGRP   |  170   |
|     IGRP      |  100   |
|     OSPF      |  110   |
|     IS-IS     |  115   |
|      RIP      |  120   |
|      EGP      |  140   |
|     IDGP      |  200   |
